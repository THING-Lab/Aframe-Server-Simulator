<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>vadapav scene</title>
  <!-- <script src="/build/three.module.js"></script> -->
  <!-- <script src="/jsm/controls/DeviceOrientationControls.js"></script> -->
  <meta name="description" content="vadapav scene">
  <script src="/socket.io/socket.io.js"></script>
  <script src="/scripts/quaternion.js"></script>
    <!-- import { DeviceOrientationControls } from './jsm/controls/DeviceOrientationControls.js'; -->
    
  <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
</head>
<body>
<a-scene id="myscene">

  <a-assets>
    <img id="groundTexture" src="https://cdn.aframe.io/a-painter/images/floor.jpg" crossorigin="anonymous">
    <img id="skyTexture" src="https://cdn.aframe.io/a-painter/images/sky.jpg" crossorigin="anonymous">
    <img id="netTexture" src="img/net_texture.jpg" crossorigin="anonymous">
    <img id="ballTexture" src="img/football_texture.png" crossorigin="anonymous">
  </a-assets>

  <a-entity camera id="cameraParent">
  </a-entity>
  <a-entity  id="cameraProxy">
    <a-camera id="qtmObject" ></a-camera>
  </a-entity>
  <!-- <a-entity id="anAvatar" scale="2 2 2" geometry="primitive: torusKnot" position="0 6 -10" material="color: magenta; metalness:1; roughness: 0.1; sphericalEnvMap: #sky;">
    <a-animation easing="linear" attribute="rotation" dur="10000" to="0 0 360" repeat="indefinite"></a-animation>
  </a-entity> -->

  <!-- Primitives. -->
  <a-sphere
    id="anAvatar"
    position="0 0.5 0"
    radius="0.5"
    rotation="0 0 0"
    color="#FFFFFF"
    src = "#ballTexture"
    animation="property: rotation; to: 0 360 0; dur: 10000;"
    animation__mouseenter="property: components.material.material.color; type: color; to: red; startEvents: mouseenter; dur: 500";
    animation__mouseleave="property: components.material.material.color; type: color; to: white; startEvents: mouseleave; dur: 500";>
  </a-sphere>
  <a-plane position="0 .1 -5" rotation="-90 0 0" width="25" height="25" color="#2BC8A4"></a-plane>

  <!-- Background sky. -->
  <a-sky height="2048" radius="30" src="#skyTexture" theta-length="90" width="2048"></a-sky>

  <!-- Ground. -->
  <a-circle src="#groundTexture" rotation="-90 0 0" radius="32"></a-circle>

  <!--Tracked controls. -->
  <!-- <a-entity hand-controls="hand: left"></a-entity>
  <a-entity hand-controls="hand: right"></a-entity> -->
</a-scene>
</body>

<script  data-main="scripts/main"  src="scripts/require.js"></script>

<script type="module">

    import * as THREE from './build/three.module.js';

    import { DeviceOrientationControls } from './jsm/controls/DeviceOrientationControls.js';

    var camera, scene, renderer, controls;

     renderer = document.getElementById('myscene').renderer;
     scene = document.querySelector("a-scene").object3D
      init();
      animate();



    function init() {

      // const cameraProxy = document.getElementById('qtmObject');
      // camera = cameraProxy.object3D;
      camera = document.querySelector("[camera]").getObject3D('camera')
      console.log("test", camera)

      controls = new DeviceOrientationControls( camera );
    }

    function animate() {

      window.requestAnimationFrame( animate );
      controls.update();
      renderer.render( scene, camera );

    }


  </script>
</html>
